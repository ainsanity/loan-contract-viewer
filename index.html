<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Total OD Summary – Contract Wise GNPA</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f6f9;
        padding: 20px;
    }
    h2 {
        margin-bottom: 10px;
    }
    .summary-box {
        background: #fff;
        padding: 15px;
        border-radius: 8px;
        width: 400px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        margin-bottom: 15px;
    }
    .summary-box div {
        margin: 5px 0;
        font-weight: bold;
    }
    select {
        padding: 6px;
        margin-top: 10px;
    }
    table {
        margin-top: 15px;
        width: 100%;
        border-collapse: collapse;
        background: #fff;
        border-radius: 8px;
        overflow: hidden;
    }
    th, td {
        padding: 10px;
        border-bottom: 1px solid #ddd;
        text-align: center;
    }
    th {
        background: #2c3e50;
        color: white;
    }
    .yes {
        color: red;
        font-weight: bold;
    }
    .no {
        color: green;
        font-weight: bold;
    }
</style>
</head>

<body>

<h2>Total OD Summary</h2>

<div class="summary-box">
    <div>Total OD Amount: ₹<span id="totalOD"></span></div>
    <div>GNPA Contracts: <span id="gnpaCount"></span></div>
    <div>Non-GNPA Contracts: <span id="nongnpaCount"></span></div>

    <select id="viewSelect" onchange="toggleTable()">
        <option value="summary">Summary View</option>
        <option value="contract">Contract-wise Split</option>
    </select>
</div>

<table id="contractTable" style="display:none;">
    <thead>
        <tr>
            <th>Contract ID</th>
            <th>Customer Name</th>
            <th>Main Group</th>
            <th>GNPA FLAG</th>
            <th>OD Amount</th>
        </tr>
    </thead>
    <tbody id="tableBody"></tbody>
</table>

<script>
const data = [
    {contract:"C001", customer:"ABC Ltd", group:"Group A", gnpa:"YES", od:120000},
    {contract:"C002", customer:"ABC Ltd", group:"Group A", gnpa:"NO", od:45000},
    {contract:"C003", customer:"XYZ Pvt Ltd", group:"Group B", gnpa:"YES", od:210000}
];

function loadSummary() {
    let totalOD = 0, gnpa = 0, nongnpa = 0;
    data.forEach(d => {
        totalOD += d.od;
        d.gnpa === "YES" ? gnpa++ : nongnpa++;
    });
    document.getElementById("totalOD").innerText = totalOD.toLocaleString();
    document.getElementById("gnpaCount").innerText = gnpa;
    document.getElementById("nongnpaCount").innerText = nongnpa;
}

function toggleTable() {
    const table = document.getElementById("contractTable");
    if (document.getElementById("viewSelect").value === "contract") {
        table.style.display = "table";
        renderTable();
    } else {
        table.style.display = "none";
    }
}

function renderTable() {
    const body = document.getElementById("tableBody");
    body.innerHTML = "";
    data.forEach(d => {
        body.innerHTML += `
            <tr>
                <td>${d.contract}</td>
                <td>${d.customer}</td>
                <td>${d.group}</td>
                <td class="${d.gnpa === 'YES' ? 'yes' : 'no'}">${d.gnpa}</td>
                <td>₹${d.od.toLocaleString()}</td>
            </tr>`;
    });
}

loadSummary();
</script>

</body>
</html>
